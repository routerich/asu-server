# ๐๏ธ Complete ASU Server Deployment

**ะะพะปะฝะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต ะปะพะบะฐะปัะฝะพะณะพ ASU ัะตัะฒะตัะฐ OpenWrt ะพะดะฝะธะผ ัะบัะธะฟัะพะผ**

ะะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ ะธ ะฝะฐัััะพะนะบะฐ:
- ๐ง ASU (Attended Sysupgrade Server)
- ๐ firmware-selector-openwrt ะฒะตะฑ-ะธะฝัะตััะตะนั  
- ๐ฑ ะะพะดะดะตัะถะบะฐ Attended Sysupgrade ะดะปั ััััะพะนััะฒ
- ๐ฏ ะะฝัะตะณัะฐัะธั ะฒะฐัะตะณะพ ะบะฐััะพะผะฝะพะณะพ Image Builder

## ๐ ะะณะฝะพะฒะตะฝะฝัะน ะทะฐะฟััะบ

```bash
# ะกะบะฐัะฐะนัะต ะธ ะทะฐะฟัััะธัะต ะตะดะธะฝัะน ัะบัะธะฟั
sudo bash deploy_complete_asu.sh
```

**ะะพั ะธ ะฒัั!** ๐ ะะดะธะฝ ัะบัะธะฟั ัะฐะทะฒะตัะฝะตั ะฟะพะปะฝัั ะธะฝััะฐััััะบัััั ASU.

## ๐ ะงัะพ ะฒะบะปััะตะฝะพ

### ๐๏ธ ะะพะปะฝะฐั ะฐะฒัะพะผะฐัะธะทะฐัะธั:
- โ ะฃััะฐะฝะพะฒะบะฐ ะฒัะตั ะทะฐะฒะธัะธะผะพััะตะน (Podman, Redis, Nginx)
- โ ะะฐัััะพะนะบะฐ ASU ัะตัะฒะตัะฐ ั ะฒะฐัะธะผ Image Builder
- โ ะะฐัััะพะนะบะฐ ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ firmware-selector
- โ ะะพะฝัะธะณััะฐัะธั Attended Sysupgrade API
- โ ะกะพะทะดะฐะฝะธะต systemd ัะตัะฒะธัะพะฒ
- โ ะะฐัััะพะนะบะฐ Nginx reverse proxy
- โ ะะพะฝัะธะณััะฐัะธั firewall

### ๐ฏ ะะปั MediaTek Filogic ััััะพะนััะฒ:
- **ะะพะดะดะตัะถะธะฒะฐะตะผัะต ัะธะฟั**: MT7981, MT7986, MT7622
- **ะฃัััะพะนััะฒะฐ**: Xiaomi AX3000T/AX6000, TP-Link AX53/AX73, ASUS RT-AX53U, GL.iNet MT3000/MT6000

### ๐ง ะะพัะพะฒัะต ะธะฝัะตััะตะนัั:
- **ะะตะฑ**: `http://your-server/` - ะฒัะฑะพั ััััะพะนััะฒะฐ ะธ ะฟะฐะบะตัะพะฒ
- **API**: `http://your-server/api/` - ะดะปั owut/auc ะธะฝัะตะณัะฐัะธะธ
- **Docs**: `http://your-server/api/docs` - ะดะพะบัะผะตะฝัะฐัะธั API

## ๐ฎ ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั

### 1๏ธโฃ ะะพะดะณะพัะพะฒะบะฐ
ะฃะฑะตะดะธัะตัั ััะพ ั ะฒะฐั ะตััั:
- Ubuntu 20.04+ ัะตัะฒะตั
- ะะฐั Image Builder ะดะปั MediaTek Filogic 24.10.1
- 4GB+ RAM, 20GB+ ะดะธัะบ

### 2๏ธโฃ ะะฐะทะฒะตัััะฒะฐะฝะธะต
```bash
sudo bash deploy_complete_asu.sh
```

ะกะบัะธะฟั ัะฟัะพัะธั:
- ะััั ะบ ะฒะฐัะตะผั Image Builder
- ะะฐะทะฒะฐะฝะธะต ัะตัะฒะตัะฐ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
- ะะพะผะตะฝ ะดะปั HTTPS (ะพะฟัะธะพะฝะฐะปัะฝะพ)

### 3๏ธโฃ ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฝะฐ ััััะพะนััะฒะฐั

#### LuCI (ะฒะตะฑ-ะธะฝัะตััะตะนั ัะพััะตัะฐ):
```bash
opkg install luci-app-attendedsysupgrade
```
ะะฐัะตะผ: System โ Attended Sysupgrade โ Server: `http://your-server/api/`

#### CLI:
```bash
owut --server http://your-server/api/ upgrade
```

## ๐ญ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   OpenWrt       โ    โ   Nginx         โ    โ   ASU Server    โ
โ   Device        โโโโโโค   Reverse       โโโโโโค   + Workers     โ
โ                 โ    โ   Proxy         โ    โ                 โ
โ owut/auc/LuCI   โ    โ                 โ    โ Custom ImageBuilder โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                โ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                       โ firmware-       โ    โ   Redis         โ
                       โ selector        โ    โ   Cache         โ
                       โ Web UI          โ    โ                 โ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
/opt/asu-server/
โโโ asu/                           # ASU ัะตัะฒะตั
โโโ firmware-selector-openwrt-org/ # ะะตะฑ-ะธะฝัะตััะตะนั
โโโ imagebuilders/                 # ะะฐัะธ Image Builder
โ   โโโ 24.10.1/
โ       โโโ mediatek/
โ           โโโ filogic/          # ะะฐั ะบะฐััะพะผะฝัะน IB
โโโ public/store/                  # ะกะพะฑัะฐะฝะฝัะต ะฟัะพัะธะฒะบะธ
โโโ status.sh                      # ะกะบัะธะฟั ะฟัะพะฒะตัะบะธ
โโโ CLIENT_SETUP.md               # ะะฝััััะบัะธะธ ะดะปั ััััะพะนััะฒ
```

## ๐๏ธ ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะฒะตัะพะผ

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ:
```bash
/opt/asu-server/status.sh
```

### ะะพะณะธ:
```bash
journalctl -u asu-server -f      # ะะพะณะธ ASU
systemctl status nginx redis    # ะกัะฐััั ัะตัะฒะธัะพะฒ
```

### ะฃะฟัะฐะฒะปะตะฝะธะต:
```bash
systemctl restart asu-server    # ะะตัะตะทะฐะฟััะบ ASU
systemctl reload nginx          # ะะตัะตะทะฐะณััะทะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
```

## ๐ง ะะฐััะพะผะธะทะฐัะธั

### ะะพะฑะฐะฒะปะตะฝะธะต ะดะพะฟะพะปะฝะธัะตะปัะฝัั Image Builder:
```bash
# ะกะพะทะดะฐะนัะต imagebuilder_manager.sh ะธะท ัะตะฟะพะทะธัะพัะธั
./imagebuilder_manager.sh add 23.05 mediatek/filogic /path/to/imagebuilder.tar.xz
```

### ะะฐัััะพะนะบะฐ ะฟะฐะบะตัะพะฒ ะฟะพ ัะผะพะปัะฐะฝะธั:
ะััะตะดะฐะบัะธััะนัะต `/opt/asu-server/firmware-selector-openwrt-org/www/config.js`

### SSL ัะตััะธัะธะบะฐัั Let's Encrypt:
```bash
apt install certbot python3-certbot-nginx
certbot --nginx -d your-domain.com
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัััะฐะธะฒะฐะตั:
- โ UFW firewall (ัะพะปัะบะพ HTTP/HTTPS/SSH)
- โ ะัะดะตะปัะฝัะน ะฟะพะปัะทะพะฒะฐัะตะปั ะดะปั ASU
- โ ะะพะฝัะตะนะฝะตัะธะทะฐัะธั ัะฑะพัะพะบ
- โ ะะทะพะปััะธั ะฟัะพัะตััะพะฒ

### ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะทะฐัะธัะฐ:
```bash
# ะะณัะฐะฝะธัะธัั ะดะพัััะฟ ะฟะพ IP
ufw allow from 192.168.1.0/24 to any port 80

# ะะบะปััะธัั rate limiting ะฒ nginx
# (ะดะพะฑะฐะฒััะต ะฒ ะบะพะฝัะธะณััะฐัะธั nginx)
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะัะพััะพะน ะผะพะฝะธัะพัะธะฝะณ:
```bash
watch -n 5 '/opt/asu-server/status.sh'
```

### Prometheus/Grafana (ะพะฟัะธะพะฝะฐะปัะฝะพ):
ASU ะฟะพะดะดะตัะถะธะฒะฐะตั ัะบัะฟะพัั ะผะตััะธะบ ะดะปั Prometheus

## โ FAQ

**Q: ะะพะถะฝะพ ะปะธ ะดะพะฑะฐะฒะธัั ะฝะตัะบะพะปัะบะพ Image Builder?**
A: ะะฐ, ะธัะฟะพะปัะทัะนัะต `imagebuilder_manager.sh` ะฟะพัะปะต ัััะฐะฝะพะฒะบะธ

**Q: ะะพะดะดะตัะถะธะฒะฐัััั ะปะธ ะดััะณะธะต ะฐััะธัะตะบัััั?**  
A: ะกะบัะธะฟั ะฝะฐัััะพะตะฝ ะดะปั MediaTek Filogic, ะฝะพ ะปะตะณะบะพ ะฐะดะฐะฟัะธััะตััั

**Q: ะะฐะบ ะพะฑะฝะพะฒะธัั ASU ะดะพ ะฝะพะฒะพะน ะฒะตััะธะธ?**
A: `cd /opt/asu-server/asu && git pull && podman-compose build`

**Q: ะงัะพ ะดะตะปะฐัั ะตัะปะธ ัะฑะพัะบะฐ ะทะฐะฒะธัะฐะตั?**
A: ะฃะฒะตะปะธัััะต ัะฐะนะผะฐััั ะฒ `/opt/asu-server/asu/.env`

## ๐จ ะฃัััะฐะฝะตะฝะธะต ะฟัะพะฑะปะตะผ

### ASU ะฝะต ะทะฐะฟััะบะฐะตััั:
```bash
journalctl -u asu-server -n 50    # ะะพัะผะพััะตัั ะปะพะณะธ
systemctl restart asu-server      # ะะตัะตะทะฐะฟัััะธัั
```

### Nginx 502 ะพัะธะฑะบะฐ:
```bash
systemctl status asu-server       # ะัะพะฒะตัะธัั ASU
curl http://localhost:8000/api/   # ะััะผะพะน ะดะพัััะฟ ะบ ASU
```

### Podman ะฟัะพะฑะปะตะผั:
```bash
podman system prune -a            # ะัะธััะธัั ะบะตั
systemctl --user restart podman   # ะะตัะตะทะฐะฟััะบ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั
```

## ๐ฏ ะะพะดะดะตัะถะธะฒะฐะตะผัะต ััััะพะนััะฒะฐ

### MediaTek Filogic (MT7981, MT7986, MT7622):
- **Xiaomi**: AX3000T, AX6000, Redmi AX6000, AX1800
- **TP-Link**: Archer AX53, AX73, AXE75, Deco X50
- **ASUS**: RT-AX53U, RT-AX59U, TUF-AX3000 V2
- **GL.iNet**: MT3000 (Beryl AX), MT6000 (Flint 2), AXT1800
- **Cudy**: WR3000, X6000, AX1800
- **Ubiquiti**: UniFi 6 Plus, Dream Router

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะผะฐัะตัะธะฐะปั

- [QUICK_START.md](QUICK_START.md) - ะัััััะน ััะฐัั
- [MEDIATEK_DEVICES.md](MEDIATEK_DEVICES.md) - ะะพะดัะพะฑะฝะพ ะพ MediaTek ััััะพะนััะฒะฐั
- [UPDATE_24_10_1.md](UPDATE_24_10_1.md) - ะัะพะฑะตะฝะฝะพััะธ ะฒะตััะธะธ 24.10.1

---

## ๐ ะะตะทัะปััะฐั

ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั ัะบัะธะฟัะฐ ั ะฒะฐั ะฑัะดะตั **ะฟะพะปะฝะพัะตะฝะฝัะน ะปะพะบะฐะปัะฝัะน ัะตัะฒะตั** ะดะปั:

โ **ะกะฑะพัะบะธ ะฟัะพัะธะฒะพะบ** ั ะฒะฐัะธะผะธ ะฟะฐะบะตัะฐะผะธ  
โ **ะะฑะฝะพะฒะปะตะฝะธั ััััะพะนััะฒ** ัะตัะตะท Attended Sysupgrade  
โ **ะะตะฑ-ะธะฝัะตััะตะนัะฐ** ะดะปั ะฒัะฑะพัะฐ ััััะพะนััะฒ  
โ **API** ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ  

**ะะดะฝะฐ ะบะพะผะฐะฝะดะฐ โ ะฟะพะปะฝะฐั ะธะฝััะฐััััะบัััะฐ ASU! ๐**